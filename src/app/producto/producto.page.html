<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button  (click)="goBack()" defaultHref="home" text="" style="--background: none;color: white;"></ion-back-button>
    </ion-buttons>
    <ion-buttons slot="end" style="margin-right: 20px;" (click)="goCarrito()">
      <ion-img src="assets/img/cart.png" class="cart-icon"></ion-img>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<!-- Content -->
<ion-content id="main-content">
  <ion-toolbar>
    <ion-searchbar [(ngModel)]="searchQuery" (ionInput)="filterProducts()"></ion-searchbar>
    <ion-button id="abrir-filtro-busqueda" class="transparent-border" slot="end" fill="clear">
      <ion-icon src="./assets/icon/options.svg"></ion-icon>
    </ion-button>
  </ion-toolbar> 

  <ion-action-sheet
    class="my-custom-class"
    *ngIf="showMenu"
    trigger="abrir-filtro-busqueda"
    header="Filtro de BÃºsqueda"
    [buttons]="buttons"
  ></ion-action-sheet>

  <!-- Spinner de carga -->
  <div *ngIf="loading" class="spinner-container">
    <ion-spinner class="custom-spinner" name="circles" color="primary"></ion-spinner>
  </div>

  <!-- Lista de productos -->
  <ion-row *ngIf="!loading">
    <ion-col *ngFor="let producto of filteredProducts" size="12">
      <ion-card class="carta" (click)="goDetalleProducto(producto)">
        <div class="card-content">
          <div class="image-container">
            <img [src]="getImagenProducto(producto)" alt="Imagen del producto" class="product-image">
          </div>
          <div class="details-container">
            <h2>{{ producto.nombre }}</h2>
            <p>{{ producto.precio }}</p>
            <ion-button class="custom-button" (click)="agregarCarrito($event, producto)">Agregar al carrito</ion-button>
          </div>
        </div>
      </ion-card>
    </ion-col>
  </ion-row>
</ion-content>
